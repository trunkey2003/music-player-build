(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},40:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(13),s=n.n(c),o=(n(40),n(15)),i=n(8),r=n.n(i),u=n(12),l=n(2),d=(n(26),n(0));function j(e){var t;return t=e.isPlaying?"cd-thumb spin":"cd-thumb",Object(d.jsx)("div",{className:"cd",children:Object(d.jsx)("div",{className:t,style:{backgroundImage:"url('".concat(e.image,"')")}})})}function b(e){var t=Object(a.useState)("btn btn-random"),n=Object(l.a)(t,2),c=n[0],s=n[1],o=Object(a.useState)("btn btn-repeat"),i=Object(l.a)(o,2),r=i[0],u=i[1];Object(a.useEffect)((function(){e.songState.activeRepeat?u("btn btn-repeat active"):u("btn btn-repeat"),e.songState.activeRandom?s("btn btn-random active"):s("btn btn-random")}),[e.songState.activeRepeat,e.songState.activeRandom]);return Object(d.jsxs)("div",{className:"control",children:[Object(d.jsx)("div",{className:r,onClick:function(){e.modifySongState.modifyActiveRepeat(!e.songState.activeRepeat)},children:Object(d.jsx)("i",{className:"fas fa-redo"})}),Object(d.jsx)("div",{className:"btn btn-prev",onClick:function(){e.songState.activeRepeat?e.modifySongPlay(e.songIndex):e.songState.activeRandom?e.modifySongPlay(Math.round(Math.random()*e.songCount-1)):0===e.songIndex?e.modifySongPlay(e.songCount-1):e.modifySongPlay(e.songIndex-1)},children:Object(d.jsx)("i",{className:"fas fa-step-backward"})}),Object(d.jsxs)("div",{className:"btn btn-toggle-play",onClick:function(){e.modifyIsPlaying(e.isPlaying)},children:[Object(d.jsx)("i",{className:"fas fa-pause icon-pause"}),Object(d.jsx)("i",{className:"fas fa-play icon-play"})]}),Object(d.jsx)("div",{className:"btn btn-next",onClick:function(){e.songState.activeRepeat?e.modifySongPlay(e.songIndex):e.songState.activeRandom?e.modifySongPlay(Math.round(Math.random()*e.songCount-1)):e.songIndex===e.songCount-1?e.modifySongPlay(0):e.modifySongPlay(e.songIndex+1)},children:Object(d.jsx)("i",{className:"fas fa-step-forward"})}),Object(d.jsx)("div",{className:c,onClick:function(){e.modifySongState.modifyActiveRandom(!e.songState.activeRandom)},children:Object(d.jsx)("i",{className:"fas fa-random"})})]})}function m(e){var t=e.percentage,n=e.modifyPercentage,a=e.modifyCurruntTime,c=e.duration,s=e.cdThumb;return Object(d.jsx)("input",{id:"progress",onChange:function(e){!function(e){n(e.target.value),a(c*e.target.value/100)}(e)},className:"progress",type:"range",step:"1",min:"0",max:"100",style:{backgroundImage:"url(".concat(s,")")},value:t||"50"})}function g(e){return Object(d.jsxs)("header",{children:[Object(d.jsx)("h4",{children:"Now playing:"}),Object(d.jsx)("h2",{children:e.song}),Object(d.jsx)("h3",{children:e.singer})]})}function f(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],s=n[1];Object(a.useEffect)((function(){"usuk"===e.songRegion?s("https://trunkey2003.github.io/img/us.png"):s("https://trunkey2003.github.io/img/vn.png")}),[e.songRegion]);return Object(d.jsx)("div",{children:Object(d.jsx)("img",{id:"change-list-btn",src:c,alt:e.songRegion,onClick:function(){"usuk"===e.songRegion?e.modifySongRegion("vn"):e.modifySongRegion("usuk")}})})}function h(e){var t;return t=e.isPlaying?"song-wave song-wave-active":"song-wave",Object(d.jsxs)("div",{className:t,children:[Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{})]})}function O(e){return Object(d.jsx)("i",{className:"fas fa-paint-roller change-theme-btn",onClick:function(){e.modifyClassTheme()}})}function x(e){return Object(d.jsx)("div",{children:Object(d.jsx)("img",{className:"user-icon",src:e.userIcon,alt:"user-icon"})})}function y(e){var t=e.validated,n=e.userIcon,c=e.songState,s=e.volumeIcon,o=e.volumeBackground,i=e.modifyClassTheme,r=e.modifySongRegion,u=e.songDetail,l=e.modifySongPlay,y=e.modifyIsPlaying,p=e.percentage,v=e.modifyPercentage,S=e.modifyCurruntTime,k=e.songCount,N=e.modifySongState,P=e.songs,C=e.ModifySongVolume;return Object(a.useEffect)((function(){0!==P.length&&l(u.songIndex,!0)}),[k]),Object(d.jsxs)("div",{className:"dashboard",children:[Object(d.jsxs)("div",{className:"volume-container",children:[Object(d.jsx)("div",{className:o}),Object(d.jsx)("i",{className:"".concat(s," volume-icon"),onClick:function(){C()}})]}),Object(d.jsx)(h,{isPlaying:u.isPlaying}),Object(d.jsx)(O,{modifyClassTheme:i}),t?Object(d.jsx)(x,{userIcon:n}):void 0===t?Object(d.jsx)(f,{songRegion:u.songRegion,modifySongRegion:r}):Object(d.jsx)(x,{userIcon:n}),Object(d.jsx)(g,{song:u.song,singer:u.singer}),Object(d.jsx)(j,{image:u.cdThumb,isPlaying:u.isPlaying,modifyIsPlaying:y}),Object(d.jsx)(b,{songState:c,modifySongState:N,songCount:k,songIndex:u.songIndex,isPlaying:u.isPlaying,modifySongPlay:l,modifyIsPlaying:y}),Object(d.jsx)(m,{cdThumb:u.cdThumb,duration:u.duration,percentage:p,modifyPercentage:v,modifyCurruntTime:S})]},"".concat(u.songRegion," ").concat(u.classTheme))}var p=n(7),v=n(16),S=n(23),k=n(22);function N(e){var t=e.userDetail,n=e.addSongToDatabase,a=e.handleAddSong,c=e.song,s=e.artists,o=e.image,i=e.path,l=e.id,j="",b=t.username,m=t.userid,g="https://api-trunkeymusicplayer.herokuapp.com/api/user/".concat(b,"/songs");o=o||"https://i1.sndcdn.com/avatars-000606604806-j6ghpm-t500x500.jpg",s&&s.map((function(e,t){j+=e.name,s.length-1!=t&&(j+=" - ")}));var f=function(){var e=Object(u.a)(r.a.mark((function e(t){var s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.getSong)(t).then((function(e){return i=e.song.streamUrls[0].streamUrl}));case 2:return console.log(i),s={name:c,singer:j,path:i,image:o},u=Object.assign(s,{username:b,userid:m,songid:t}),e.next=7,n(g,u).then((function(e){console.log(e)}));case 7:return e.next=9,a(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"songs-modal",children:[Object(d.jsx)("div",{className:"songs-modal-img",children:Object(d.jsx)("img",{alt:"hello",src:o})}),Object(d.jsxs)("div",{className:"songs-modal-detail",children:[Object(d.jsx)("h5",{className:"songs-modal-detail-song",children:c}),Object(d.jsx)("h4",{className:"songs-modal-detail-singger",children:j}),Object(d.jsx)("button",{onClick:function(){f(l)},className:"song-modal-detail-button custom-download-btn",children:"Add"})]})]})}function P(e){var t=Object(a.useRef)(),n=Object(a.useState)(!1),c=Object(l.a)(n,2),s=c[0],o=c[1],i=Object(a.useState)([]),j=Object(l.a)(i,2),b=j[0],m=j[1],g=Object(a.useState)(!1),f=Object(l.a)(g,2),h=f[0],O=f[1],x=Object(a.useState)(!1),y=Object(l.a)(x,2),P=y[0],C=y[1],w=function(){return o(!1)};function R(){return I.apply(this,arguments)}function I(){return I=Object(u.a)(r.a.mark((function e(){var t,n,a,c=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)});case 4:return a=e.sent,e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"add-song-section",onClick:function(){return o(!0)},children:"Add your own song"}),Object(d.jsxs)(p.a,{size:"lg",className:"custom-modal-01",show:s,onHide:w,children:[Object(d.jsxs)(p.a.Header,{closeButton:!0,children:[Object(d.jsx)(p.a.Title,{children:"Add your song to the playlist"}),Object(d.jsx)("button",{type:"button",className:"custom-btn-close-modal",onClick:w,"aria-label":"Close",children:Object(d.jsx)("i",{className:"fas fa-times"})})]}),Object(d.jsxs)(p.a.Body,{children:[Object(d.jsx)("h2",{className:"text-center",children:"Search song"}),Object(d.jsx)("input",{ref:t,onChange:function(e){var n;(n=e.target.value)&&(O(!0),Object(k.searchByKeyword)(n).then((function(e){"success"==e.status?(t.current.value===n&&m(e.search.song.song),O(!1),C(!1)):"error"==e.status&&(console.log("Error search"),C(!0))})))},className:"search-song-input"}),Object(d.jsx)("div",{className:"songs-modal-container",children:P?Object(d.jsx)("div",{className:"error",children:Object(d.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/trunkey-music-player.appspot.com/o/error.jpg?alt=media&token=8411cc5c-4456-489d-b0a1-3eb129ddd564"})}):Object(d.jsx)(d.Fragment,{children:b?0==h?b.map((function(t,n){return Object(d.jsx)(N,{userDetail:e.userDetail,addSongToDatabase:R,modifySongPlay:e.modifySongPlay,songs:e.songs,handleAddSong:e.handleAddSong,id:t.key,song:t.title,artists:t.artists,image:t.thumbnail})})):Object(d.jsx)("div",{className:"songs-modal-loading",children:Object(d.jsxs)("h4",{children:["Loading ",Object(d.jsx)(S.a,{animation:"border",className:"spinner",variant:"info"})]})}):""})})]}),Object(d.jsxs)(p.a.Footer,{children:[Object(d.jsx)(v.a,{variant:"secondary",className:"custom-close-btn",onClick:w,children:"Close"}),Object(d.jsx)(v.a,{variant:"primary",className:"custom-download-btn",onClick:w,children:"Save Changes"})]})]})]})}function C(e){var t="song",n=Object(a.useState)("option-songs-btn"),c=Object(l.a)(n,2),s=c[0],o=c[1],i=Object(a.useState)(!1),j=Object(l.a)(i,2),b=j[0],m=j[1],g=Object(a.useState)(!1),f=Object(l.a)(g,2),h=f[0],O=f[1],x=function(){return m(!1)},y=function(){return O(!1)},S=function(){var t=Object(u.a)(r.a.mark((function t(n,a,c,s){var o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s?"https://api-trunkeymusicplayer.herokuapp.com/api/user/".concat(a,"/songid/").concat(s):"https://api-trunkeymusicplayer.herokuapp.com/api/user/".concat(a,"/songs/").concat(n),console.log(e),t.next=4,fetch(o,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({songid:e.songid})}).then((function(e){return console.log(e)})).catch((function(){return console.log("Err")}));case 4:e.handleSoftDelte(c);case 5:case"end":return t.stop()}}),t)})));return function(e,n,a,c){return t.apply(this,arguments)}}();e.songIndex===e.index&&(t="song active");var k=function(){return o("option-songs-btn"===s?"option-songs-btn show-option-songs":"option-songs-btn")};return Object(d.jsxs)("div",{className:t,id:"song-".concat(e.index),onClick:function(){var t;t=e.index,e.modifySongPlay(t,!0),e.modifyIsPlaying(!1)},children:[Object(d.jsx)("div",{className:"thumb",style:{backgroundImage:"url('".concat(e.thumb,"')")}}),Object(d.jsxs)("div",{className:"body",children:[Object(d.jsx)("h3",{className:"title",children:e.title}),Object(d.jsx)("p",{className:"author",children:e.singer})]}),Object(d.jsxs)("div",{className:"option",onClick:function(e){e.stopPropagation()},children:[Object(d.jsx)("i",{className:"fas fa-ellipsis-h three-dot",onClick:function(){k()}}),Object(d.jsxs)("div",{className:s,children:[Object(d.jsxs)("button",{onClick:function(){return m(!0)},children:["Download ",Object(d.jsx)("i",{className:"fas fa-download"})]}),Object(d.jsxs)("button",{onClick:function(){return O(!0)},children:[e.validated?"Delete":"Soft delete"," ",Object(d.jsx)("i",{className:"fas fa-trash"})]})]}),Object(d.jsxs)(p.a,{className:"custom-modal-01",show:b,onHide:x,children:[Object(d.jsxs)(p.a.Header,{closeButton:!0,children:[Object(d.jsxs)(p.a.Title,{children:["Download ",e.title]}),Object(d.jsx)("button",{type:"button",className:"custom-btn-close-modal",onClick:x,"aria-label":"Close",children:Object(d.jsx)("i",{className:"fas fa-times"})})]}),Object(d.jsxs)(p.a.Body,{children:["Are you sure you want to download this song ?",Object(d.jsxs)("div",{className:"thumbnail",children:[Object(d.jsx)("img",{alt:e.title,src:e.thumb,className:"thumbnail-img"}),Object(d.jsxs)("div",{className:"thumbnail-content",children:[Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"Song"})," : ",e.title]}),Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"by"})," ",e.singer]})]})]})]}),Object(d.jsxs)(p.a.Footer,{children:[Object(d.jsx)(v.a,{variant:"secondary",className:"custom-close-btn",onClick:x,children:"Close"}),Object(d.jsxs)(v.a,{className:"custom-download-btn",href:e.src,download:!0,children:["Download ",Object(d.jsx)("i",{className:"fas fa-download"})]})]})]}),Object(d.jsxs)(p.a,{className:"custom-modal-01 darkTheme",show:h,onHide:y,children:[Object(d.jsxs)(p.a.Header,{closeButton:!0,children:[Object(d.jsxs)(p.a.Title,{children:["Remove ",e.title," "]}),Object(d.jsx)("button",{type:"button",className:"custom-btn-close-modal","aria-label":"Close",onClick:y,children:Object(d.jsx)("i",{className:"fas fa-times"})})]}),Object(d.jsxs)(p.a.Body,{children:["Are you sure you want to remove this song from your list ? ",Object(d.jsx)("br",{})," ",Object(d.jsx)("span",{className:"custom-text-note",children:e.validated?"":"Note that this song won't be deleted permanently from my database :)"}),Object(d.jsxs)("div",{className:"thumbnail",children:[Object(d.jsx)("img",{alt:e.title,src:e.thumb,className:"thumbnail-img"}),Object(d.jsxs)("div",{className:"thumbnail-content",children:[Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"Song"})," : ",e.title]}),Object(d.jsxs)("h5",{children:[Object(d.jsx)("b",{children:"by"})," ",e.singer]})]})]})]}),Object(d.jsxs)(p.a.Footer,{children:[Object(d.jsx)(v.a,{variant:"secondary",className:"custom-close-btn",onClick:y,children:"Close"}),Object(d.jsxs)(v.a,{variant:"danger",className:"custom-delete-btn",onClick:function(){e.validated?S(e.objectid,e.username,e.index,e.songid):(e.handleSoftDelte(e.index),k(),y())},children:["Delete ",Object(d.jsx)("i",{className:"fas fa-trash"})]})]})]})]})]})}function w(e){return Object(d.jsx)("div",{className:"playlist",children:e.validated&&e.songs?Object(d.jsxs)(d.Fragment,{children:[e.songs.map((function(t,n){return Object(d.jsx)(C,{songid:t.songid,username:e.userDetail.username,objectid:t._id,validated:e.validated,handleSoftDelte:e.handleSoftDelte,thumb:t.image,title:t.name,src:t.path,singer:t.singer,songIndex:e.songIndex,index:n,modifySongPlay:e.modifySongPlay,modifyIsPlaying:e.modifyIsPlaying},n)})),Object(d.jsx)(P,{userDetail:e.userDetail,modifySongPlay:e.modifySongPlay,songs:e.songs,handleAddSong:e.handleAddSong})]}):Object(d.jsx)(d.Fragment,{children:e.songs.map((function(t,n){return Object(d.jsx)(C,{objectid:t._id,validated:e.validated,handleSoftDelte:e.handleSoftDelte,thumb:t.image,title:t.name,src:t.path,singer:t.singer,songIndex:e.songIndex,index:n,modifySongPlay:e.modifySongPlay,modifyIsPlaying:e.modifyIsPlaying},n)}))})},e.songRegion+" "+e.classTheme)}function R(){return Object(d.jsx)("div",{className:"Loading",children:Object(d.jsxs)("h1",{children:["Loading songs from database ",Object(d.jsx)(S.a,{animation:"border",variant:"danger"})]})})}var I=function(e){var t,n=e.path,c=Object(a.useRef)(),s=Object(a.useRef)(),i=Object(a.useState)("usuk"),j=Object(l.a)(i,2),b=j[0],m=j[1],g=Object(a.useState)([]),f=Object(l.a)(g,2),h=f[0],O=f[1],x=Object(a.useState)(!1),p=Object(l.a)(x,2),v=p[0],S=p[1],k=Object(a.useState)(!0),N=Object(l.a)(k,2),P=N[0],C=N[1],I=Object(a.useRef)(),T=Object(a.useState)(0),D=Object(l.a)(T,2),A=D[0],E=D[1],F=Object(a.useState)(""),B=Object(l.a)(F,2),M=B[0],L=B[1],H=Object(a.useState)(""),V=Object(l.a)(H,2),J=V[0],U=V[1],_=Object(a.useState)(""),z=Object(l.a)(_,2),K=z[0],q=z[1],G=Object(a.useState)(""),Q=Object(l.a)(G,2),W=Q[0],X=Q[1],Y=Object(a.useState)(!1),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)(0),ne=Object(l.a)(te,2),ae=ne[0],ce=ne[1],se=Object(a.useState)(0),oe=Object(l.a)(se,2),ie=oe[0],re=oe[1],ue=Object(a.useState)(!1),le=Object(l.a)(ue,2),de=le[0],je=le[1],be=Object(a.useState)(!1),me=Object(l.a)(be,2),ge=me[0],fe=me[1],he=Object(a.useState)(!0),Oe=Object(l.a)(he,2),xe=Oe[0],ye=Oe[1],pe=Object(a.useState)("defualt-theme"),ve=Object(l.a)(pe,2),Se=ve[0],ke=ve[1],Ne=Object(a.useState)(1),Pe=Object(l.a)(Ne,2),Ce=Pe[0],we=Pe[1],Re=Object(a.useState)("volume-background"),Ie=Object(l.a)(Re,2),Te=Ie[0],De=Ie[1],Ae=Object(a.useState)("fas fa-volume-up"),Ee=Object(l.a)(Ae,2),Fe=Ee[0],Be=Ee[1],Me={src:M,cdThumb:J,song:K,singer:W,isPlaying:$,songIndex:A,duration:ae,classTheme:Se,songRegion:b};Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xe){e.next=17;break}return C(!0),e.next=4,fetch("".concat(n,"/admin/us")).then((function(e){return e.json()})).then((function(e){s.current=e})).catch((function(e){return console.log(e)}));case 4:return e.next=6,fetch("".concat(n,"/admin/vn")).then((function(e){return e.json()})).then((function(e){c.current=e})).catch((function(e){return console.log(e)})).finally((function(){C(!1),ye(!1)}));case 6:t="usuk"===b?s.current:c.current,O(t),U(t[0].image),q(t[0].name),X(t[0].singer),L(t[0].path),E(0),Ue(0),re(0),e.next=25;break;case 17:a&&"usuk"===b&&(s.current=a),a&&"vn"===b&&(c.current=a),a="usuk"===b?s.current:c.current,O(a),U(a[0].image),q(a[0].name),X(a[0].singer),L(a[0].path);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[b,xe]),Object(a.useEffect)((function(){I.current&&(I.current.volume=Ce)}),[Ce,I.current]),$&&I.current?(t="player playing",I.current.play()):I.current?(t="player",I.current.pause()):t="player";var Le=function(e){ee(!e)},He=function(e,t){var n;h&&(t||(de&&(e=Math.round(Math.random()*h.length)),ge&&(e=A)),h[e]&&(E(e),Ue(0),re(0),n=h[e].name,q(n),function(e){X(e)}(h[e].singer),function(e){L(e)}(h[e].path),function(e){U(e)}(h[e].image)))},Ve={modifyActiveRandom:function(e){je(e)},modifyActiveRepeat:function(e){fe(e)}},Je={activeRandom:de,activeRepeat:ge},Ue=function(e){I.current.currentTime=e},_e=function(e){var t=Object(o.a)(h);t.push(e),O(t),S(!0)};return Object(a.useEffect)((function(){v&&(He(h.length-1,!0),S(!1))}),[_e,v]),Object(d.jsx)("div",{className:"".concat(t," ").concat(Se),children:!0===P?Object(d.jsx)(R,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(y,{songState:Je,volumeIcon:Fe,volumeBackground:Te,ModifySongVolume:function(e){switch(Ce){case 0:we(.4),De("volume-background-02"),Be("fas fa-volume-down");break;case.4:we(.65),De("volume-background-03"),Be("fas fa-volume-down");break;case.65:we(.8),De("volume-background-04"),Be("fas fa-volume-down");break;case.8:we(1),De("volume-background"),Be("fas fa-volume-up");break;case 1:we(0),De("volume-background-01"),Be("fas fa-volume-mute");break;default:alert("Sound Volume error")}},modifyClassTheme:function(){ke("defualt-theme"===Se?"custom-theme-01":"custom-theme-01"===Se?"custom-theme-02":"custom-theme-02"===Se?"custom-theme-03":"defualt-theme")},modifySongRegion:function(e){E(0),m(e)},modifySongState:Ve,songCount:h.length,songDetail:Me,modifyIsPlaying:Le,modifySongPlay:He,percentage:ie,modifyPercentage:function(e){re(e)},modifyCurruntTime:Ue,songs:h}),Object(d.jsx)("audio",{ref:I,id:"audio",onTimeUpdate:function(e){return function(e){var t=e.target.currentTime/ae*100;re(t),100===ie&&(A===h.length-1?He(0):He(A+1))}(e)},src:M,onLoadedData:function(e){ce(e.currentTarget.duration)}}),Object(d.jsx)(w,{classTheme:Se,songRegion:b,handleSoftDelte:function(e){var t=Object(o.a)(h);t.splice(e,1),O(t)},songIndex:A,src:M,modifySongPlay:He,modifyIsPlaying:Le,songs:h,handleAddSong:_e})]})})},T=n(4);var D=function(e){var t,n=e.path,c=Object(T.g)().username,s=Object(a.useRef)(),i=Object(a.useRef)(),j=Object(a.useState)("https://trunkey2003.github.io/general-img/default-profile-pic.jpg"),b=Object(l.a)(j,2),m=b[0],g=b[1],f=Object(a.useState)("usuk"),h=Object(l.a)(f,2),O=h[0],x=h[1],p=Object(a.useState)([]),v=Object(l.a)(p,2),S=v[0],k=v[1],N=Object(a.useState)(!1),P=Object(l.a)(N,2),C=P[0],I=P[1],D=Object(a.useState)(!0),A=Object(l.a)(D,2),E=A[0],F=A[1],B=Object(a.useRef)(),M=Object(a.useState)(0),L=Object(l.a)(M,2),H=L[0],V=L[1],J=Object(a.useState)(""),U=Object(l.a)(J,2),_=U[0],z=U[1],K=Object(a.useState)(""),q=Object(l.a)(K,2),G=q[0],Q=q[1],W=Object(a.useState)("Song"),X=Object(l.a)(W,2),Y=X[0],Z=X[1],$=Object(a.useState)("Singer"),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),ce=Object(l.a)(ae,2),se=ce[0],oe=ce[1],ie=Object(a.useState)(0),re=Object(l.a)(ie,2),ue=re[0],le=re[1],de=Object(a.useState)(0),je=Object(l.a)(de,2),be=je[0],me=je[1],ge=Object(a.useState)(!1),fe=Object(l.a)(ge,2),he=fe[0],Oe=fe[1],xe=Object(a.useState)(!1),ye=Object(l.a)(xe,2),pe=ye[0],ve=ye[1],Se=Object(a.useState)(!0),ke=Object(l.a)(Se,2),Ne=ke[0],Pe=ke[1],Ce=Object(a.useState)("defualt-theme"),we=Object(l.a)(Ce,2),Re=we[0],Ie=we[1],Te=Object(a.useState)(1),De=Object(l.a)(Te,2),Ae=De[0],Ee=De[1],Fe=Object(a.useState)("volume-background"),Be=Object(l.a)(Fe,2),Me=Be[0],Le=Be[1],He=Object(a.useState)("fas fa-volume-up"),Ve=Object(l.a)(He,2),Je=Ve[0],Ue=Ve[1],_e={src:_,cdThumb:G,song:Y,singer:te,isPlaying:se,songIndex:H,duration:ue,classTheme:Re,songRegion:O};Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ne){e.next=7;break}return F(!0),e.next=4,fetch("".concat(n,"/").concat(c)).then((function(e){return e.json()})).then((function(e){e&&(i.current=e),console.log(i.current),g(e[0].avatar),s.current=!0})).catch((function(){s.current=!1,F(!1)}));case 4:if(!s.current){e.next=7;break}return e.next=7,fetch("".concat(n,"/").concat(c,"/songs")).then((function(e){return e.json()})).then((function(e){e&&k(e)})).catch((function(){console.log("Cannot get user songs")})).finally((function(){F(!1),Pe(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),console.log("Validated : "+s.current)}),[O,Ne]),Object(a.useEffect)((function(){B.current&&(B.current.volume=Ae)}),[Ae,B.current]),se&&B.current?(t="player playing",B.current.play()):B.current?(t="player",B.current.pause()):t="player";var ze=function(e){oe(!e)},Ke=function(e,t){var n;S&&(t||(he&&(e=Math.round(Math.random()*S.length)),pe&&(e=H)),S[e]&&(V(e),Qe(0),me(0),n=S[e].name,Z(n),function(e){ne(e)}(S[e].singer),function(e){z(e)}(S[e].path),function(e){Q(e)}(S[e].image)))},qe={modifyActiveRandom:function(e){Oe(e)},modifyActiveRepeat:function(e){ve(e)}},Ge={activeRandom:he,activeRepeat:pe},Qe=function(e){B.current.currentTime=e},We=function(e){var t=Object(o.a)(S);t.push(e),k(t),I(!0)};return Object(a.useEffect)((function(){C&&(Ke(S.length-1,!0),I(!1))}),[We,C]),Object(d.jsx)("div",{className:"".concat(t," ").concat(Re),children:!0===E?Object(d.jsx)(R,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(y,{userIcon:m,validated:s.current,username:c,songState:Ge,volumeIcon:Je,volumeBackground:Me,ModifySongVolume:function(e){switch(Ae){case 0:Ee(.4),Le("volume-background-02"),Ue("fas fa-volume-down");break;case.4:Ee(.65),Le("volume-background-03"),Ue("fas fa-volume-down");break;case.65:Ee(.8),Le("volume-background-04"),Ue("fas fa-volume-down");break;case.8:Ee(1),Le("volume-background"),Ue("fas fa-volume-up");break;case 1:Ee(0),Le("volume-background-01"),Ue("fas fa-volume-mute");break;default:alert("Sound Volume error")}},modifyClassTheme:function(){Ie("defualt-theme"===Re?"custom-theme-01":"custom-theme-01"===Re?"custom-theme-02":"custom-theme-02"===Re?"custom-theme-03":"defualt-theme")},modifySongRegion:function(e){V(0),x(e)},modifySongState:qe,songCount:S.length,songDetail:_e,modifyIsPlaying:ze,modifySongPlay:Ke,percentage:be,modifyPercentage:function(e){me(e)},modifyCurruntTime:Qe,songs:S}),Object(d.jsx)("audio",{ref:B,id:"audio",onTimeUpdate:function(e){return function(e){var t=e.target.currentTime/ue*100;me(t),100===be&&(H===S.length-1?Ke(0):Ke(H+1))}(e)},src:_,onLoadedData:function(e){le(e.currentTarget.duration)}}),Object(d.jsx)(w,{userDetail:i.current[0],validated:s.current,classTheme:Re,songRegion:O,handleSoftDelte:function(e){var t=Object(o.a)(S);t.splice(e,1),k(t)},songIndex:H,src:_,modifySongPlay:Ke,modifyIsPlaying:ze,songs:S,handleAddSong:We})]})})},A=n(25);var E=function(){return Object(d.jsx)(A.a,{children:Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(T.c,{children:[Object(d.jsx)(T.a,{exact:!0,path:"/",element:Object(d.jsx)(I,{path:"https://api-trunkeymusicplayer.herokuapp.com/api"})}),Object(d.jsx)(T.a,{path:"/user/:username",element:Object(d.jsx)(D,{path:"https://api-trunkeymusicplayer.herokuapp.com/api/user"})})]})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};s.a.render(Object(d.jsx)(E,{}),document.getElementById("root")),F()}},[[72,1,2]]]);
//# sourceMappingURL=main.2f3f6fa1.chunk.js.map